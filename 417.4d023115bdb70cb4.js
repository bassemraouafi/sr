"use strict";(self.webpackChunksr_stock=self.webpackChunksr_stock||[]).push([[417],{1417:(k,u,l)=>{l.r(u),l.d(u,{AddArticleModule:()=>q});var a=l(6895),p=l(1959),o=l(433),e=l(1571),g=l(73),m=l(4696);function A(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"div",40)(1,"span",41),e._uU(2),e.qZA(),e.TgZ(3,"button",42),e.NdJ("click",function(){e.CHM(t);const c=e.oxw();return e.KtG(c.closeAlert())}),e.TgZ(4,"span",43),e._uU(5,"\xd7"),e.qZA()()()}if(2&r){const t=e.oxw();e.xp6(2),e.Oqu(t.errorMessage)}}function h(r,n){1&r&&(e.TgZ(0,"div",44),e._uU(1," la d\xe9signation est requise. "),e.qZA())}function _(r,n){1&r&&(e.TgZ(0,"div",44),e._uU(1," choisissez l'unit\xe9 de stockage "),e.qZA())}function f(r,n){1&r&&(e.TgZ(0,"div",44),e._uU(1," PU TTC est incorrect. "),e.qZA())}function v(r,n){1&r&&(e.TgZ(0,"span"),e._uU(1,"\u33a1"),e.qZA())}function Z(r,n){1&r&&(e.TgZ(0,"span"),e._uU(1,"pi\xe8ce"),e.qZA())}function T(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"uppercase"),e.qZA(),e.TgZ(4,"td"),e.YNc(5,v,2,0,"span",45),e.YNc(6,Z,2,0,"span",45),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.ALo(9,"number"),e.qZA(),e.TgZ(10,"td")(11,"button",46),e.NdJ("click",function(){const s=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.editArticle(s))}),e._UZ(12,"i",47),e.qZA()()()}if(2&r){const t=n.$implicit;e.xp6(2),e.Oqu(e.lcZ(3,4,t.designation)),e.xp6(3),e.Q6J("ngIf","m2"===t.storageUnit),e.xp6(1),e.Q6J("ngIf","pi\xe8ce"===t.storageUnit),e.xp6(2),e.hij("",e.xi3(9,6,t.purchasePrice,"1.2-2")," TND")}}function b(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"li",36)(1,"a",48),e.NdJ("click",function(){const s=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.getArticles(s))}),e._uU(2),e.qZA()()}if(2&r){const t=n.$implicit,i=e.oxw();e.ekj("active",i.page.number===t),e.xp6(2),e.Oqu(t+1)}}const C=[{path:"",component:(()=>{class r{constructor(t,i){this.formBuilder=t,this.articleService=i,this.articleForm=this.formBuilder.group({designation:["",o.kI.required],storageUnit:["",o.kI.required],purchasePrice:["",o.kI.required]}),this.articles=[],this.selectedArticle=null,this.errorMessage="",this.page={content:[],totalElements:0,totalPages:0,number:0},this.search="",this.currentPage=0,this.totalPages=0,this.pageSize=10}onSubmit(){this.articleForm.valid&&(this.selectedArticle?(console.log("Modifier l'article :",this.articleForm.value),this.articleService.updateArticle(this.selectedArticle.id,this.articleForm.value).subscribe(t=>{console.log("Article cr\xe9\xe9:",t),this.articleForm.reset(),this.selectedArticle=null,this.getArticles()},t=>{console.log(t),this.errorMessage=t})):this.articleService.createArticle(this.articleForm.value).subscribe({next:t=>{console.log("Article cr\xe9\xe9:",t),this.articleForm.reset(),this.getArticles()},error:t=>{console.log(t),this.errorMessage=t}}))}editArticle(t){this.selectedArticle=t,this.articleForm.patchValue({designation:t.designation,storageUnit:t.storageUnit,purchasePrice:t.purchasePrice})}ngOnInit(){this.getArticles()}getArticles(t=0){this.currentPage=t,this.articleService.getArticles(this.currentPage,this.pageSize,this.search).subscribe(i=>{this.page=i,this.articles=i.content,this.totalPages=i.totalPages})}onSearchChange(){this.getArticles()}get pages(){return Array(this.totalPages).fill(0).map((t,i)=>i)}closeAlert(){this.errorMessage=""}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(o.qu),e.Y36(g.n))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-add-article"]],decls:65,vars:20,consts:[[1,"app-content","container","center-layout","mt-2"],[1,"content-overlay"],[1,"content-wrapper"],[1,"content-header","row"],["class","alert alert-pink alert-dismissible fade show text-white","role","alert",4,"ngIf"],[1,"content-body"],[1,"row","match-height"],[1,"col-xl-12","col-lg-12"],[1,"card"],[1,"card-content"],[1,"card-body"],[1,"row"],[1,"col-12"],[3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-group","col-6"],["for","designation"],["type","text","id","designation","formControlName","designation","required","",1,"form-control"],["class","invalid-feedback",4,"ngIf"],[1,"form-group","col-3"],["for","storageUnit"],["id","storageUnit","formControlName","storageUnit","required","",1,"form-control"],["value","m2"],["value","pi\xe8ce"],["for","purchasePrice"],["type","number","id","purchasePrice","formControlName","purchasePrice","required","","placeholder","0","min","1",1,"form-control"],[1,"row","float-right"],[1,"form-group","col-5"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"row","mb-2"],[1,"input-group"],["type","text","placeholder","Rechercher un article","name","searchTerm",1,"form-control",3,"ngModel","ngModelChange"],[1,"table","table-striped","table-responsive-md"],[4,"ngFor","ngForOf"],["aria-label","Page navigation mb-3 "],[1,"pagination","justify-content-center"],[1,"page-item"],["aria-label","Previous",1,"page-link",3,"click"],["class","page-item",3,"active",4,"ngFor","ngForOf"],["aria-label","Next",1,"page-link",3,"click"],["role","alert",1,"alert","alert-pink","alert-dismissible","fade","show","text-white"],[1,"text-white"],["type","button","data-dismiss","alert","aria-label","Close",1,"close","text-white",3,"click"],["aria-hidden","true"],[1,"invalid-feedback"],[4,"ngIf"],[1,"btn","btn-outline-purple","btn-sm",3,"click"],[1,"fa","fa-edit"],[1,"page-link",3,"click"]],template:function(t,i){1&t&&(e._UZ(0,"app-navbar"),e.TgZ(1,"div",0),e._UZ(2,"div",1),e.TgZ(3,"div",2),e._UZ(4,"div",3),e.YNc(5,A,6,1,"div",4),e.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"div",12)(14,"form",13),e.NdJ("ngSubmit",function(){return i.onSubmit()}),e.TgZ(15,"div",14)(16,"div",15)(17,"label",16),e._uU(18,"DESIGNATION:"),e.qZA(),e._UZ(19,"input",17),e.YNc(20,h,2,0,"div",18),e.qZA(),e.TgZ(21,"div",19)(22,"label",20),e._uU(23,"UNIT\xc9:"),e.qZA(),e.TgZ(24,"select",21)(25,"option",22),e._uU(26,"m2"),e.qZA(),e.TgZ(27,"option",23),e._uU(28,"pi\xe8ce"),e.qZA()(),e.YNc(29,_,2,0,"div",18),e.qZA(),e.TgZ(30,"div",19)(31,"label",24),e._uU(32,"PU TTC:"),e.qZA(),e._UZ(33,"input",25),e.YNc(34,f,2,0,"div",18),e.qZA()(),e.TgZ(35,"div",26)(36,"div",27)(37,"button",28),e._uU(38),e.qZA()()()()()(),e.TgZ(39,"div",29)(40,"div",30)(41,"input",31),e.NdJ("ngModelChange",function(s){return i.search=s})("ngModelChange",function(){return i.onSearchChange()}),e.qZA()()(),e.TgZ(42,"div",11)(43,"table",32)(44,"thead")(45,"tr")(46,"th"),e._uU(47,"D\xc9SIGNATION"),e.qZA(),e.TgZ(48,"th"),e._uU(49,"UNIT\xc9"),e.qZA(),e.TgZ(50,"th"),e._uU(51,"PU TTC"),e.qZA(),e.TgZ(52,"th"),e._uU(53,"ACTION"),e.qZA()()(),e.TgZ(54,"tbody"),e.YNc(55,T,13,9,"tr",33),e.qZA()(),e.TgZ(56,"nav",34)(57,"ul",35)(58,"li",36)(59,"a",37),e.NdJ("click",function(){return i.getArticles(i.page.number-1)}),e._uU(60,"\xab"),e.qZA()(),e.YNc(61,b,3,3,"li",38),e.TgZ(62,"li",36)(63,"a",39),e.NdJ("click",function(){return i.getArticles(i.page.number+1)}),e._uU(64,"\xbb"),e.qZA()()()()()()()()()()()()()),2&t&&(e.xp6(5),e.Q6J("ngIf",i.errorMessage),e.xp6(9),e.Q6J("formGroup",i.articleForm),e.xp6(5),e.ekj("is-invalid",i.articleForm.controls.designation.invalid&&i.articleForm.controls.designation.touched||i.errorMessage),e.xp6(1),e.Q6J("ngIf",i.articleForm.controls.designation.invalid&&i.articleForm.controls.designation.touched),e.xp6(4),e.ekj("is-invalid",i.articleForm.controls.storageUnit.invalid&&i.articleForm.controls.storageUnit.touched),e.xp6(5),e.Q6J("ngIf",i.articleForm.controls.storageUnit.invalid&&i.articleForm.controls.storageUnit.touched),e.xp6(4),e.ekj("is-invalid",i.articleForm.controls.purchasePrice.invalid&&i.articleForm.controls.purchasePrice.touched),e.xp6(1),e.Q6J("ngIf",i.articleForm.controls.purchasePrice.invalid&&i.articleForm.controls.purchasePrice.touched),e.xp6(3),e.Q6J("disabled",i.articleForm.invalid),e.xp6(1),e.Oqu(i.selectedArticle?"Modifier":"Cr\xe9er"),e.xp6(3),e.Q6J("ngModel",i.search),e.xp6(14),e.Q6J("ngForOf",i.articles),e.xp6(3),e.ekj("disabled",0===i.page.number),e.xp6(3),e.Q6J("ngForOf",i.pages),e.xp6(1),e.ekj("disabled",i.page.number===i.page.totalPages-1))},dependencies:[a.sg,a.O5,m.S,o._Y,o.YN,o.Kr,o.Fj,o.wV,o.EJ,o.JJ,o.JL,o.Q7,o.qQ,o.sg,o.u,o.On,a.gd,a.JJ]}),r})()}];let U=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[p.Bz.forChild(C),p.Bz]}),r})();var F=l(4466);let q=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[a.ez,U,F.m,o.UX,o.u5]}),r})()}}]);